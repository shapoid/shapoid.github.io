# netwhat

Created: Dec 30, 2020 10:47 PM
Status: In Progress
Timeline: Jan 10, 2021

# 학습 사항

![netwhat%201ef30e3a9db54df6831922c1853c0104/SmartSelect_20201230-224656_Adobe_Acrobat.jpg](netwhat%201ef30e3a9db54df6831922c1853c0104/SmartSelect_20201230-224656_Adobe_Acrobat.jpg)

ip

netmask

subnet

subnet of ip with netmask

broadcast address of subnet

# Coursera | The bits and bytes of computer networking

# Week 1

## TCP/IP five layer network model

![netwhat%201ef30e3a9db54df6831922c1853c0104/B424003E-5B01-4F9A-BA12-EF80527203FA.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/B424003E-5B01-4F9A-BA12-EF80527203FA.jpeg)

![netwhat%201ef30e3a9db54df6831922c1853c0104/5BC35CA2-DA6E-4C98-A9A5-3A7C84AA012B.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/5BC35CA2-DA6E-4C98-A9A5-3A7C84AA012B.jpeg)

### 1. physical layer

represents the physical devices that interconnect computers

cabling, sending signals

### 2. data link layer

(network interface, network access layer)

responsible for defining a common way of interpreting these signals so network devices can communicate

protocol : ethernet (getting data to nodes on the same network / single link)

### 3. network layer

(internet layer)

allow different networks to communicate with each other through devices known as routers

transfering data between internetwork

protocol : IP

client : request data

server : answer request

### 4. transport layer

sorts out which client and server programs are supposed to get that data

protocol : TCP(ensure delivery accuracy), UDP

### 5. application layer

protocol : app specific e.g. http

OSI 7 layer model abstracts this layer into 3 layers.

[](https://www.sans.org/reading-room/whitepapers/standards/osi-model-overview-543)

### 6. The OSI model : an overview

Open Systems Interconnection

At first ISO try to make design standard for equipment manufacturers to communicate. OSI model defines a hierarchical architecture required to support system-to-system communication.

7 - Application: provides different services to the app 

6 - Presentation: converts the information

5 - Session: handles problems which are not communication issues

4 - Transport: provides end to end communication control

3 - Network: routes the information in the network

2 - Data link: provides error control

1 - Physical: connects the entity to the transmission media

design principles

  - new layer is created when another level of abstraction is needed.

  - each layer should perform well defined function

  - the layer boundary is chosen to minimize the information flow across the interface

important concepts

  service, interface, protocol

[OSI model](https://en.wikipedia.org/wiki/OSI_model)

## Network devices

### 1. Cables

connect different devices

category:

  copper cable

    method: voltage change

    characteristic: number of twists in the pair of copper wires that result different usable length and transfer rates.

    cat 5/5e/6/7

    crosstalk: electrical pulse on one wire is detected on another wire.

  fiber-optic cable

    method: light pulse 

    characteristic: thin glass tubes. fragile, no effect on electromagnetic interference

### 2. Hubs and Switches

used to connect computers on a signle network, LAN.

Hub: physical layer device which allows for connections from many computers at once

  All devices connected to the hub can talk to all other and it's up to hub to decide ignore incoming data.  This causes lot of noises and creates collision domain where only one device can communicate at a time. Eventually it slows down network communication.

Network switch: data link layer device which allows sending data to the intended destination by inspecting ethernet data.

### 3. Routers

Network layer device that knows how to forward data between independent networks by inspecting IP data. They store internal table containing information about route traffic between networks over the world.

category

  router for home network: contains detailed routing table, take traffic from LAN to ISP, Internet Service Provider

  core router: form backbone of the internet handling a lot more traffic and complex sending decisions. They use BGP, Border Gateway Protocol which choose optimal paths to forward traffic

### 4. Servers and Clients

Network device is a node. Server provides requested data to client. Almost all nodes are server and client at the same time. Individual computer program can be server.

## Physical layer

### Moving bits across the wire

transmitting bits across computer networks.

Bits are at lowest level what make up frames and packets of data

modulation: Bits are sent across network cables through modulation process which is a way of varying the voltage. Used in computer network, modulation is called line coding. It allows either end of a link to understand that electrical charge in a certain state is zero and in another state is a one.

### Twisted pair cabling and duplexing

common type of cabling used for connecting computer devices is twisted pair.

A standard cat6 cable consists of 4 twisted pair of cables in a single jacket. Twisted pair helps protect against electromagnetic interference and crosstalk from other pairs. 

duplex communication: Information can flow in both directions across the cable. It's possible by 1 or 2 pairs for communicating in one direction. If connection problem occurs, network link might operate as half-duplexing where only one device can be communicating at a time.

supplementary reading

[Ethernet over twisted pair](https://en.wikipedia.org/wiki/Ethernet_over_twisted_pair)

protocol which determine how much and quickly data can be sent, how long the cables can be before quality begins to degrade.

### Network ports and patch panels

Cables ends with a plug that exposes internal wires. The most common plug is a Rj45. The plug is connected to network port which directly attached to the device. Most network port has 2 LED. One is link LED which will be lit when a cable is properly connected to two devices, and the other is activity LED which will be lit when the data is actively transmitted.

Patch panel is a device containing many network ports. Network ports which mounted on a wall are connected to the patch panel via cables.  Patch panel does no other work so additional cables connect it to switches or routers to provides network access.

## Data link layer

### Ethernet and MAC address

In workplace and data center, traditional cable network is still a common option. The protocol used to send data across individual links is Ethernet. 

Data link layer and ethernet abstract away the need to care about physical layer and what hardware is in use. So, higher layers can operate the same no matter how the device is connected.  

CSMA/CD: In 1983, switch hadn't been invented yet. That means many devices on a network share one collision domain, so if two computers send data at the same time, collision occurs. Ethernet solve this by technique known as carrier sense multiple access with collision domain; CSMA/CD. This determine when the channel is clear and when device is free to transmit data.

MAC address: In a collision domain, we need a way to identify which node the transmission was actually meant for. MAC address is globally unique identifier attached to an individual network interface. 

![netwhat%201ef30e3a9db54df6831922c1853c0104/Untitled.png](netwhat%201ef30e3a9db54df6831922c1853c0104/Untitled.png)

48bits grouped of two hexadecimal numbers

OUI is assigned to individual manufacturers by the IEEE and last three octets are assigned by manufacturers 

Ethernet uses both an address for sending machine and for intended machine.

### Unicast, Multicast, Broadcast

ways for one device to transmit data to one other device

- unicast: transmission for one receiving address, least significant bit in the first octet of a destination MAC address is 0, it would be sent to all devices on the collision domain, but only  received and processed by the intended destination (1 to 1)
- multicast: transmission for all devices on the local network signal, east significant bit in the first octet is 1, it will be accepted or discarded by each device (1 to many)
- broadcast: every single device on a LAN, MAC address is FF:FF:FF:FF:FF:FF (1 to all)

### Dissecting and ethernet frame

packet: general concept for single set of binary data being sent across a network link

Ethernet frame: data packet at the data link layer. In this way network interfaces at the physical layer can convert a string of bits

![netwhat%201ef30e3a9db54df6831922c1853c0104/809A0B7B-9562-4112-86E4-26BC6F6776BB.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/809A0B7B-9562-4112-86E4-26BC6F6776BB.jpeg)

- preamble: 8 bytes long. first seven bytes act partially as a buffer between frames and can also be used by the network interfaces to synchronize internal clocks. last bit is start frame delimiter which signals to a receiving device that the preamble is over.
- destination and source MAC address: each 6 bytes long
- VLAN header: It indicates that the frame itself is what's called a VLAN frame; virtual LAN lets one equipment have multiple logical LANs
- EtherType field: 16 bits long. it's used to describe the protocol of the contents of the frame type
- payload: actual data being transported from higher layers such as the IP, transport and application layers
- frame check sequence: 4 bytes long. cyclical redundancy check is used. receiving network interface can infer if it received uncorrupted data.

# Week 2

## The Network Layer

### The network layer

the way that nodes learn about each other's physical addressing isn't translatable to anything besides a single network anyway.

### IP address

Internet Protocol address; 32 bit long numbers made up of four octets, and each octet is normally described in decimal numbers

- IP addresses are more hierarchical and easier to store data about than physical addresses are.
    - e.g. IBM routers have 9.x.x.x IP address. internet router only has to know to get data to one of IBMs routers. That router can handle the rest of the delivery process from there.
- MAC address belongs to the device. IP address belongs to the networks.
- DHCP(Dynamic Host Configuration Protocol) automatically connects device and IP address.
- static IP address is configured manually.
- dynamic IP is for clients, static IP is for server and network device usually.

### IP datagram and encpsulation

IP datagram: data packet for network layer.

![netwhat%201ef30e3a9db54df6831922c1853c0104/C46CE4C9-9AE4-4B2A-88D4-79E1261521AE.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/C46CE4C9-9AE4-4B2A-88D4-79E1261521AE.jpeg)

header: 

- version: 4 bits; version of Internet protocol; ipv4, ipv6
- header length : 4 bits; 20 bytes when ipv4
- service type: 8 bits; details about quality of service(QoS) technology.
    - QoS: allow routers to make decisions about which IP datagram is more important than others
- total length: 16 bits; length of the IP datagram
- identification: 16 bits; used to group messages together. max size of single datagram is 2^16. if data is larger than this, ip layer split this up into packets. receiving end understands that every packet with the same value in identification field is part of the same transmission.
- flags: indicate if datagram is allowed to be fragmented, or  has already been fragmented
- fragment offset: allows receiving end to take all the parts of a fragmented packets and put them back in the correct order.
- TTL(Time To Live): 8 bits; how many router hops a datagram can traverse before it's thrown away. to prevent a misconfiguration in routing that endlessly loops.
- protocol: 8 bits; what transport layer protocol is; UDP or TCP
- header checksum: updated along with TTL
- source & destination address
- option: used to set special characteristics for datagrams used for testing
- padding : series of 0

![netwhat%201ef30e3a9db54df6831922c1853c0104/268E0BC4-E12D-4E7F-98BB-9274E81F9FD5.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/268E0BC4-E12D-4E7F-98BB-9274E81F9FD5.jpeg)

encapsulation: payload part of ethernet frame is IP datagram. each layer uses data from the layer above to make their packet.

### IP address class

IP: network ID + host ID

IP address class: way of defining how the global IP address space is split up

![netwhat%201ef30e3a9db54df6831922c1853c0104/C3F2B39E-3525-4563-A774-CDBDF8C17332.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/C3F2B39E-3525-4563-A774-CDBDF8C17332.jpeg)

Class system is mostly replaced by a CIDP, Classless Inter-Domain Routing

class

- A: first octet for network ID
- B: ~ second octet for network ID
- C: ~ third octet for network ID
- D: for multicasting
- E: for testing

### Address Resolution Protocol

way of how MAC & IP address types relate to each other

- ARP: protocol to discover the hardware address of  a node with certain IP address.

Once IP datagram has been fully formed, it needs to be encapsulated inside an Ethernet frame which require destination MAC address.

- ARP table: list of MAC - IP address pairs

if destination MAC address doesn't exist in ARP table, source sends broadcast ARP message to current LAN

## Subnetting

### Subnetting

process of splitting a large network up into many individual smaller subnets.

### Subnet mask

used to know network/ subnet/ host ID portion in IP address

strings of ones in subnet mask corresponds to the (network + subnet ID) part in the IP address. We know network ID by IP address class,  so the rest is subnet ID. The rest strings of zeros corresponds to the host ID part in the IP address. 

In other words, binary AND operation of IP and subnet mask results in (network + subnet ID)

1 - 254 are available for host ID. 0 not used and 255 for broadcast address

### CIDR

Classless Inter-Domain Routing

address classes and subnetting couldn't keep up growing internet.

more flexible approach to describing blocks of IP addresses. It expands on the concept of subnetting by using subnet mask to demarcate networks.

demarcation: setting something off. demarcation point is where one network or system ends and another one begins.

With CIDR, network ID and subnet ID are combined into one and address classes are abandoned. So, it allows arbitrary network sizes and additional available host IDs.

- broadcast address

    네트워크 주소에서 subnet mask의 0 부분을 모두 1로 바꾼 주소

Q) 10.0.0.1/24 와 10.0.0.2/24 의 호스트들은 구분되나? 예를 들어 10.0.0.3 이라는 호스트는 표현만 본다면 두 네트워크 모두에 속할 수 있지 않나?

## Routing

### Basic routing concept

router: network device that forwards traffic depending on the destination address of that traffic. It has at least two network interfaces, since it has to be connected to two networks

basic routing steps: 

1. a router receives a packet of data on one of its interfaces. 
2. the router examines the destination IP of this packet. 
3. the router then looks up the destination network of this IP in its routing table. 
4. the router forwards that out though the interface that's closest to the remote network. As determined by additional info within the routing table.
- the router needs to form a new packet to forwarding Network and to decrement the TTL field by one and calculates a new checksum. Then it encapsulates this new IP datagram inside of a new Ethernet frame with updated source and destination MAC addresses.

### Routing table

most basic routing table will have four columns.

1. destination network: each network that the router knows
2. catchall entry: any IP address that it doesn't have an explicit network listing
3. next hops: IP address of the next router
4. total hops: shortest possible path to the destination resulting from constantly updating traffic information.  

### Routing protocol

routing tables are always updated with information about quickest path.

routing protocol: is used by the routers speak to each other to share information

category

Interior gateway protocol: is used by routers to share infos within a single autonomous system.   e.g. large company with many offices which have their own LAN, ISP in national scale 

  autonomous system: collection of networks that all fall under the control of a single network operator

  distance-vector protocol: only consider neighboring routers; RIP, EIGRP

  link state routing protocol: every router knows detail about every other router in the system; OSPF

![netwhat%201ef30e3a9db54df6831922c1853c0104/1C7ACF7A-1F0E-4C76-8441-CE7F635D9430.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/1C7ACF7A-1F0E-4C76-8441-CE7F635D9430.jpeg)

Exterior gateway protocol: is used to communicate data between routers representing the edges of an autonomous system. Cor internet routers get data to the edge router of an autonomous system; BGP

  ASN; Autonomous System Number allocation; 32bit single decimal number assigned to individual autonomous system. IANA is responsible

specs published by IETF are base of many network protocols 

### Non-routable address space

#private

RFC: Request for Comments; community developing and maintaining the standards for the internet

RFC 1918 outlined non-routable address space; ranges of IPs set aside for use by anyone that cannot be routed to.

10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16.

NAT: Network Address Translation → it helps devices at non routable address space to communicat e with others on the internet.

# Week 3

## intro to transport and application layers

physical/data link/network layers:

transport/application layers:

- transport layer:
- application layer:

contents: TCP port, socket, TCP header, connection oriented & connectionless protocol, TCP usage

## Transport Layer

### Intro

At a small business a single server could host many apps to run a business such as internal website, mail server, file server, print server. It's possible by multiplexing and demultiplexing

![netwhat%201ef30e3a9db54df6831922c1853c0104/7CAA44EF-3FCC-4EA0-9B57-A8209F3ED81F.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/7CAA44EF-3FCC-4EA0-9B57-A8209F3ED81F.jpeg)

- multiplexing: nodes on the network have ability to direct traffic toward many receiving services
- demultiplexing: receiving end take traffic to the same node and deliver it to proper receiving service

Transport layer handles mul. and demul. through ports

- port: 16 bits number used to direct traffic to specific services running on a networked computer

If same device request webpage from web server listening on IP 10.1.1.100 and files from FTP(File Transfer Protocol) server  listening on IP 10.1.1.100, each traffic would be directed to 10.1.1.100:80 and 10.1.1.100:21(port 80 for HTTP, 21 for FTP)

- 10.1.1.100:80 form is socket address[number]

learning goals:

- difference between TCP and UDP
- 3 way handshake and TCP flags
- firewall

### Dissection of a TCP segment

TCP segment: data packet for Transport layer; header + data(payload for app layer)

![netwhat%201ef30e3a9db54df6831922c1853c0104/35F8AD34-EA40-42E3-8FBE-A9C54949550E.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/35F8AD34-EA40-42E3-8FBE-A9C54949550E.jpeg)

- source port: high numbered port chosen from ephemeral ports. it's required to keep outgoing connections separate
- destination port: port of service the traffic intended for
- sequence number: used to keep track of where in a sequence of segments this one is expected to be
- acknowledgment number: sequence number of next expected segment
- header  length: receiving network device knows where the payload begins
- TCP window: range of sequence numbers
- urgent pointer: with one of control flags to point out particular segments that is more important than others. it doesn't exist in modern networking
- options: used for complicated flow control protocols

system ports vs ephemeral ports

[Supplemental Reading for System Ports versus Ephemeral Ports](netwhat%201ef30e3a9db54df6831922c1853c0104/Supplemental%20Reading%20for%20System%20Ports%20versus%20Ephem%20d5db0b15f8b447fa8f10dc161528824e.md)

### TCP control flags and the three-way handshake

TCP sends long chains of segments of data while lower protocols send individual packets

TCP establishes connections through the use of control flags in specific order.

meaning of 6 TCP control flags with value 1

- URG: urgent; the segment is considered urgent and urgent pointer field has more data.
- ACK: acknowledge; acknowledgment number field is examined.
- PSH: push; sending device wants receiving device to push currently buffered data to the app on the receiving end asap
    - buffer: computer technique where a certain amount of data is held somewhere before being sent somewhere else.
- RST: reset; when one of the side in a TCP connection hasn't been able to properly recover from a series of missing of malformed segments
- SYN: synchronize; used when first establishing a TCP connection and make sure receiving end knows to examine sequence number field
- FIN: finish; transmitting computer doesn't have data to send and connection can be closed

TCP communication

![netwhat%201ef30e3a9db54df6831922c1853c0104/5628B1CA-65BF-462F-8420-017A5360EE3A.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/5628B1CA-65BF-462F-8420-017A5360EE3A.jpeg)

(watch the acknowledgment numbers)

1. establishing TCP connection - three way handshake
    1. A: (sending segment with) SYN flag set. "Let's establish connection and look at my sequence number so that we know where this conversation starts."
    2. B: SYN, ACK flags. "Let's establish connection and I acknowledge your sequence number."
    3. A: ACK flag. "I acknowledge your acknowledgment. Let's start sending data."
2. full duplex communication. Each segment sent in either direction should be responded to by segment with ACK field set.
3. closing TCP connection - four way handshake
    1. B: FIN flag.
    2. A: ACK flag.
    3. A: if it's ready to close, send FIN flag. if not, connection stays open in simplex mode(B → A)
    4. B: ACK flag.

### TCP socket states

socket: instantiation of an endpoint in a potential TCP connection. TCP socket requires actual programs to instantiate them.

- instantiation: actual implementation of something defined elsewhere.
- we can send traffic to any port but only get a response if program has opened socket on that port. TCP sockets can exist in lots of states.

states

- LISTEN: TCP socket is ready and listening for incoming connections. server side only.
- SYN_SENT: synchronization request has been sent, but connection hasn't been established yet. client side only.
- SYN_RECEIVED: socket previously in a listener state has received synchronization request and sent a SYN_ACK back. But it hasn't received final ACK from client yet. server side only.
- ESTABLISHED: TCP connection is in working order. both sides are free to send each other data. both sides.
- FIN_WAIT: FIN has been sent, but corresponding ACK from the other end hasn't been received yet.
- CLOSE_WAIT: connection has been closed at the TCP layer, but the application that opened the socket hasn't released its hold on the socket yet.
- CLOSED: connection has been fully terminated.

socket states and their names can vary between OSs.

### Connection-oriented and connectionless protocols

connection-oriented protocol: like TCP, it establishes connection and uses this to ensure that all data has been properly transmitted. 

Both ends always know which bits of data have been delivered and which haven't. Because TCP protects data against possible fails by forming connection. These fails at lower layers cause entire frame to be discarded.

- possible fails: at physical layer, crosstalk with pairs in a cable cause CRC fail. congestion in traffic. company cuts fiber cable connecting two ISPs

Resending data at lower layers(IP, ethernet) due to checksum fails is entirely up to the transport layer protocol. At IP or Ethernet level, if a checksum doesn't match, all that data is discarded. Since TCP expects ACK for every bit of data it sends, it's in best position to know what data got delivered and make decision to resend a segment if needed.

There's a lot of overhead with TCP. When connection establishes and ends, that all accounts for extra traffic.

connectionless protocol: it doesn't rely on connections and acknowledgment. it just set destination port and send the packet. This is useful for messages that aren't super important such streaming video. It saves more of available bandwidth for actual data transfer. 

- UDP: User Datagram Protocol

### Firewalls

- device/program that blocks traffic that meets certain criteria.
- It can operate at different layers of the network but is most commonly used at transportation layer. firewall at this layer generally have configuration that enables them to block traffic to certain port while allowing traffic to other ports.
- for many users, functionality of router and firewall is performed by same device.
- it can run on individual hosts instead of being a network device.
- all major OS have built-in firewall.

## Application Layer

### The application layer

TCP segments have generic data section which is for applications.

e.g.

- contents of web page, if web browser is connecting to web server
- streaming video of netflix app connecting with netflix server
- contents of documents, if word processor is sending to printer

at this layer there are so many protocols in use but they are standardized across app types.

- for web traffic, all web browser and servers use HTTP protocol in order to ensure interoperability.

### The application layer and the OSI model

OSI or Open Systems Interconnection model

- 5th layer is the session layer. it's responsible for things like facilitating the communication between actual applications and the transport layer. It's part of OS that takes the application layer data that's been unencapsulated from all the layers below it, and hands it off to the presentation layer.
- 6th layer is the presentation layer. it's responsible for making sure that the unencapsulated application layer data is actually able to be understood by the application in question. it's part of an OS that handle encryption or compression of data.
- in 5, 6th layers, there is no encapsulation

### All the layers working in unison

case description

![netwhat%201ef30e3a9db54df6831922c1853c0104/6249717B-97CB-42CD-B9EE-B91D3C8CF63D.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/6249717B-97CB-42CD-B9EE-B91D3C8CF63D.jpeg)

2 is a server in a data center and has a web server listening on port 80

1. request of web browser - end user at computer 1 opens up web browser and enters 172.16.1.100 into the address bar. web browser knows it's been ordered to retrieve a web page from 172.16.1.100. the web browser communicates with the local networking stack, which is part of the OS responsible for handling networking functions.
2. response of networking stack -  the web browser explains that it's going to want to establish TCP connection to 172.16.1.100 port 80. The networking stack examines its own subnet. It sees that it lives on the network 10.1.1.0/24 which means that destination is on another network.
3. building packet(1) MAC address of gateway - computer 1 knows that it have to send any data to its gateway for routing to a remote network. and it's been configured with a gateway of 10.1.1.1. computer 1 looks at its ARP table to determine what MAC address of 10.1.1.1 is, but it doesn't find corresponding entry. So computer 1 crafts ARP request for an IP address of 10.1.1.1 which it sends to the hardware broadcast address. this request is sent to every node on the local network. when router A receives this ARP message, it sees that it's the computer currently assigned the IP of 10.1.1.1. it responds to computer 1 to let it know about its own MAC address of 00:11:22:33:44:55. computer 1 receive this response and it's ready to start constructing the outbound packet.
4. building packet(2) port of sending node - computer 1 is being asked by the web browser to form an outbound TCP connection, which need outbound TCP port. the OS identifies the ephemeral port of 50000 as being available, and opens a socket connecting the web browser to this port.
5. building packet(3) TCP, IP, ethernet encapsulation - the networking stack knows it needs to establish a connection before sending any data the web browser want it to. so it starts to build a TCP segment. it fills in all the appropriate fields in the header including source port of 50000, destination of 80. sequence number is chosen, SUN flag is set and checksum is calculated. TCP segment is passed along to the IP layer of the networking stack. this layer constructs IP header with source(10.1.1.100)/destination(172.16.1.100) IP, TTL of 64 which is standard value. TCP segment is inserted as the data payload for the IP data gram and checksum is calculated. ethernet datagram is constructed with MAC address of gateway and appropriate data, IP datagram as the data payload, calculated checksum. 
6. routing packet(1) from computer 1 to router A - computer 1 have ethernet frame ready to be sent across the physical layer. the network interface connected to computer 1 sends this binary data as modulations of the voltage of an electrical current running across a CAT6 cable that's connected between it and a network switch. this switch receives the frame and inspects destination MAC address. it knows which of  its interfaces this MAC address is attached to, and forwards the frame across only the cable connected to this interface. at the other end of this link is router A. it takes entirety of the frame and calculates a checksum against it and compares   this checksum with the one in the ethernet frame header and sees that they match. 
7. routing packet(2) from router A to router B - router A strips away ethernet frame and perform checksum calculation with IP datagram. it inspects destination IP address and performs a lookup in its routing table. router A sees that in order to get data to the 172.16.1.0/24 network, quickest path is one hop away via router B, which has IP 192.168.1.1. router A decrements the TTL by 1, calculates new checksum and makes new IP datagram with this data. router A knows it needs to get this datagram to router B, which has IP of 192.168.1.1. it looks at its ARP table, and sees that it has entry for 192.168.1.1. router A construct ethernet frame with the MAC of its interface on network B as the source and the MAC of router B's interface on network B as the destination. once values of all fields in frame have been filled out, router A puts datagram into the payload, calculate checksum and sends the frame out to network B.
8. routing packet(3) from router B to computer 2 - router B performs all the same checks, removes ethernet frame encapsulation, performs checksum against IP datagram, and examines destination IP address.  looking at its routing table, router B sees that destination address of computer 2 is on a locally connected network. it decrements TTL by 1, calculates new checksum, and creates new IP datagram. it is encapsulated by new ethernet frame with source and destination MAC of router B and computer 2. the frame is sent out onto network C, and switch ensures it gets sent out of the interface that computer 2 is connected to. 
9. checking and responding to packet - computer 2 receives the frame, identifies its own MAC as destination. it strips away ethernet frame leaving it with IP datagram, performs CRC recognizing data is intact, examines destination IP recognizing that as its own, strips away IP datagram, leaving it with TCP segment. the checksum for this layer is examined and everything checks out. computer 2 examines destination port which is 80. networking stack on computer 2 checks to ensure that there's an open socket on port 80, which there is. it's in the listen state, and held open by a running Apache web server. computer 2 sees that this packet has SYN flag set, examines sequence number and stores that. sequence number is put in acknowledgment filed when crafting the response
10. 1~9 process have to happen all over again for (computer 2 → computer 1) SYN/ACK response and (computer 1 → computer 2) ACK response.

description what happens at every step of our network model, when a node on one network establishes a TCP connection with a node on another network.

Briefly writing, to establish TCP connection between two nodes, they do three way handshake which sending TCP segments with SYN, SYN/ACK, ACK flags set each other.
description of sending TCP packet from one node to another. Let a, b are sending and receiving node and A,B are networks where each a, b are included.

1. Sending TCP frame to router between A and B
To do this 'a' have to make ethernet frame which needs MAC address of the router in A. -> 'a' sends broadcast messages in A -> gets MAC of router and make ethernet frame -> make IP frame with 64 TTL and corresponding checksum -> TCP frame with SYN flag(a->b) set, source port from ephemeral ports and destination port with TCP port 80(web traffic for example)

## w3 틀린문제

- When is using the Transmission Control Protocol (TCP) most appropriate? (phone call)
- Which Transmission Control Protocol (TCP) flag is used to make sure the receiving end knows how to examine the sequence number field? (SYN)

# Week 4 | Networking Services

## Intro to Network Services

the main purpose of computer networking is network services can be available to answer request for the data from clients. sheer number and variety of things that might comprise a network service make it impossible to cover all of them. but there are a lot of network services and techs that are used to help make computer networking more user friendly and secure.

- importance of name resolution
- many steps with DNS lookup and common DNS record types
- DHCP which makes network administration a simpler task
- NAT which help keep networks secure and preserve IP address space
- how VPN and proxy help users get connected and stay secure

## Name Resolution

### need of DNS

DNS make it easier for humans to remember how to get to a website, and it also lets administrative changes happen behind the scenes without an end user having to change their behavior

- humans are better at remembering words. DNS is a global and highly distributed network service that resolves strings of letters into IP address for us.
    - DNS: Domain Name System
- IP it resolves to could change, depending on a variety of factors. by using DNS, an organization can just change what IP a domain name resolves to.
    - IP change depending on where in the world we are. the further we have to route data, the slower things will become. so instead of keeping all of web servers in one place, companies could distribute them across data centers across the globe. this way someone in Seoul, visiting a website, might get served by a web server close to Seoul. DNS lets organizations decide resolve the domain name to this IP

### many steps of NR

name resolution: DN(human prefer) → IP(computer prefer)

things one computer need to configure to operate on a modern network:

- MAC address: hard coded  to hardware
- IP address, subnet mask
- gateway for a host
- DNS server

 5 DNS server types

- caching name server: store domain name lookups for a certain amount of time
- recursive name server: perform full DNS resolution requests
- root name server
- TLD name server
- authoritative name server

DNS server can do many these roles at once.

- caching and recursive name servers: generally provided by an ISP or your local network. since it takes many steps to perform fully qualified resolution of DN, ISP or LAN have caching name server to prevent many steps happening every time. All domain names in the global DNS system have a TTL or time to live. This is a value in seconds, that can be configured by the owner of a domain name for how long a name server is allowed to cache in entry before it should discard it and perform a full resolution again.

steps of full recursive resolution by local recursive server

![netwhat%201ef30e3a9db54df6831922c1853c0104/CD81B30C-FD51-4EB7-9A8B-718B6B5D3011.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/CD81B30C-FD51-4EB7-9A8B-718B6B5D3011.jpeg)

1. contact a root name server - there are 13 root name servers. they're responsible for directing queries toward the appropriate TLD name server. In the past, 13 root servers were distributed to very specific geographic regions, but today, they're distributed across the globe via anycast.
    - anycast: technique that's used to route traffic to different destinations depending on factors like location, congestion, or link health. Using anycast, computer can send a datagram to a specific IP but could see it routed to one of many different actual destinations depending on a few factors. there aren't really only 13 physical route name servers anymore. It's better to think of them as 13 authorities that provide route name lookups as a service.
2. response of root servers - root server respond to a DNS lookup with the TLD name server that should be queried.
    - TLD(Top Level Domain): represents the top of the hierarchical DNS name resolution system. it's the last part of any domain name. for example, ".com". for each TLD, there's a TLD name server, but just like with root servers, this doesn't mean there's only physically one server , it's most likely a global distribution of anycast accessible servers responsible for each TLD.
3. response of TLD servers with redirect - it informs the computer performing the name lookup with what authoritative name server to contact.
    - authoritative name servers: responsible for the last two parts of any domain name which is the resolution at which a single organization may be responsible for DNS lookups. for example, "google.com".
4. providing actual IP by authoritative server - the DNS lookup could be redirected at the authoritative server for "google[.com](http://weather.com/)" which would finally provide the actual IP of the server in question.
- this strict hierarchy is very important to the stability of the internet. it's the best way to protect against malicious parties redirecting traffic

DNS resolve = recursive DNS server

### DNS and UDP

DNS is an application layer service that uses UDP for the transport layer.

- UDP is connectionless, so so much less traffic needs to be transmitted.
- single DNS request and response can usually fit inside of single UDP datagram.
- DNS can generate a lot of traffic.

scenario TCP vs UDP

![netwhat%201ef30e3a9db54df6831922c1853c0104/959FB58E-A702-4507-BEC6-A964BD704B17.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/959FB58E-A702-4507-BEC6-A964BD704B17.jpeg)

- UDP: 8 packets
- TCP: 44 packets ( 4 * (2 for request and response + 3 for establishment handshake + 4 for end handshake + 2 for ACK response))
- DNS resolver just asks again if it doesn't get a response.
- DNS over TCP does in fact exist and is also in use all over. As the Web has gotten more complex, it's no longer the case that all DNS lookup responses can fit in a single UDP datagram. In these situations, a DNS name server would respond with a packet explaining that the response is too large.

## NR in practice

### resource record types

DNS operates with a set of defined resource record types. these allows different DNS resolutions take place

common record types

- A: used to point a certain domain name at a certain IPv4 IP address. in our earlier discussions of DNS, we made the assumption that the DNS resolver was asking for the A record for a domain name. in its most basic use, a single A record is configured for a single domain name. but single DN can have multiple A records which allows for DNS round robin to balance traffic
- AAAA(quad A): ipv6
- CNAME: canonical name. redirect traffic from one domain to another. for example, by setting up a CNAME that points "[microsoft.com](http://microsoft.com/)" at "[www.microsoft.com](http://www.microsoft.com/)", you'd only have to change the A record for "[www.microsoft.com](http://www.microsoft.com/)".  it's always easier to only have one source of truth
- MX: mail exchange. deliver e-mail to the correct server
- SRV: service record. define the location of various specific services
- TXT: text. originally for associating descriptive text with a domain name for human consumption, now additional data intended for other computers to process
- NS and SOA:   define authority information of DNS zones

### anatomy of domain name

3 primary parts

- subdomain: (www) sometimes referred to as a host name if it's been assigned to only one host
- domain: name commonly used to refer to the second part of a domain name. it's used to demarcate where control moves from a TLD name server, to an authoritative name server. it can be registered and chosen by any individual or company, but they must all end in one of the predefined TLEs
- TLD: administration and definition of TLDs is handled by a non-profit organization known as ICANN. they help define and control both the global IP spaces, along with the global DNS system.
- FQDN: fully qualified domain name

it costs money to officially register a domain with a registrar, subdomains can be freely chosen and assigned by anyone who controls such a registered domain.

- registrar: company that has an agreement with ICANN to sell unregistered domain names
- DNS can technically support up to 127 levels of domain in total
- individual section can only be 63 characters long and a complete FQDN is limited to a total of 255 character

### DNS zones

hierarchical concept to allow for easier control over multiple levels of a domain.

as the number of resource records in a single domain increases, it becomes more of a headache to manage them all. network administrators can ease this pain by splitting up their configurations into multiple zones.

authoritative name server is responsible for some even finer-grained zones underneath that. root name server is responsible for the root zone. TLD name server is responsible for the zone covering its specific TLD.

- root and TLD name servers are just authoritative name servers too
- It's just that the zones that they're authoritative for are special cases.

zones don't overlap

- "[google.com](http://google.com)" and ".com" example: the administrative authority of the TLD name server for the ".com" TLD doesn't encompass the "[google.com](http://google.com/)" domain. Instead, it ends at the authoritative server responsible for "[google.com](http://google.com/)".

example of DNS zone: imagine company that owns the domain [largecompany.com](http://largecompany.com/). it has offices in LA, Paris, and Shanghai. each office has 200 people with uniquely named pc. this would be 600 A records to keep track of if it was all configured as a single zone. what the company could do, instead, is split up each office into their own zone. so now, we could have [la.largecompany.com](http://la.largecompany.com/), [pa.largecompany.com](http://pa.largecompany.com/), and [sh.largecompany.com](http://sh.largecompany.com/) as subdomains, each with their own DNS zones. four authoritative name servers would now be required for the setup, one for [largecompany.com](http://largecompany.com/) and one for each of the subdomains.

zone files: simple configuration files that declare all resource records for a particular zone

- SOA(start of authority): declares the zone and the name of the name server that is authoritative for it
- NS(name server): indicate other name servers that may also be responsible for this zone

reverse lookup zone files: let DNS resolvers ask for an IP, and get the FQDN

- pointer resource record: resolves an IP to a name

## Dynamic Host Configuration Protocol

### overview of DHCP

DHCP: application layer protocol that automates configuration process of hosts on a network.

- managing hosts on a network is time consuming task. computer on a modern TCP/IP based network needs to have at least four things configured. IP address, subnet mask, primary gateway, name server. only IP address is different on every node. DHCP helps IP configuration. machine queries DHCP server when computer connects to the network and receive all the networking configuration
- static vs dynamic IP - servers or network equipment on network need to know the IP of their gateway at all time. however, it's really only important that client devices have an IP on the right network. It's much less important exactly which IP that is. DHCP configure a range of IP addresses that's set aside for these clients.
- operation
    - dynamic allocation: a range of IP is set aside for client devices and one of IPs is issued to devices which request one. IP of a computer could be different almost every time it connects to the network.
    - automatic allocation: with a range of IP, DHCP server is asked to keep track of which IPs it's assigned to certain devices. it will assign the same IP to the same machine each time if possible.
    - fixed allocation: requires specified list of MAC / IP pairs. it can be used as a security measure

### DHCP in action

DHCP is to help configure the network layer itself. how DHCP works without a network layer configuration?

DHCP discovery(DHCP lease): process by which client configured to use DHCP attempts to get network configuration information

1. server discovery - DHCP clients sends a DHCP discover broadcast message onto the network. DHCP listens on UDP port 67 and DHCP discovery messages are always sent from UDP port 68 with source IP 0.0.0.0.
2. server response - DHCPOFFER message with a destination port 68, a source port 67, a destination broadcast IP of 255.255.255.255, its actual IP as the source.
3. client response - DHCPREQUEST message. it means client likes to have an IP that server offers to it.
4. server response - DHCPACK message. networking stack on the client can now use the configuration information presented to it by DHCP server.

## Network Address Translation

### basics of NAT

NAT: it takes one IP address and translates it into another. it's a technique instead of a defined standard. reasons to do this range from security safeguards to preserving limited amounts of available IPv4 space.

ip masquerading

![netwhat%201ef30e3a9db54df6831922c1853c0104/2519B440-4D8C-4FF6-B25E-47D7329D541F.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/2519B440-4D8C-4FF6-B25E-47D7329D541F.jpeg)

- at most basic level, NAT is technology that allows a gateway to rewrite source IP of outgoing IP datagram while retaining the original IP in order to rewrite it into the response.
- IP masquerading: what NAT is doing is hiding the IP of computer 1 from computer 2. we can  have hundreds of computers on network A, all of their IPs being translated by the router.  the entire address space of network A is protected and invisible. This is one-to-many NAT.

### NAT and transport layer

at the transport layer things get complicated and additional techniques come into play. with one-to-many NAT, it has potentially hundreds of responses all directed at the same IP and the router at this IP needs to figure out which responses go to which computer.

solutions

![netwhat%201ef30e3a9db54df6831922c1853c0104/610F097D-93A5-4444-9F58-E4B627B7ECBD.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/610F097D-93A5-4444-9F58-E4B627B7ECBD.jpeg)

- port preservation: technique where the source port chosen by client is the same port used by the router. outbound connections choose a source port at random, from the ephemeral ports in the range 49,152 ~ 65, 535. router setup to NAT outbound traffic keep track of what this source port is, and use that to direct traffic back to the right computer. when two computers choose the same source port around the same time, router normally selects an unused port at random to use instead.

![netwhat%201ef30e3a9db54df6831922c1853c0104/FA92AC63-6114-4399-AAAD-3A038896692C.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/FA92AC63-6114-4399-AAAD-3A038896692C.jpeg)

- port forwarding: technique where specific destination ports can be configured to always be delivered to specific nodes. it simplifies how external users interact with lots of services all run by the same organization.

### NAT, non-routable address space and limits of IPv4

IANA has been responsible with assigning address blocks to five regional internet registries( RIR). AFRINIC(Africa), ARIN(United States, Canada and parts of the Caribbean), APNIC,(Asia, Oceania), LACNIC(Central and South America and rest of the Caribbean not in ARIN)., RIPE(Europe, Russia, the Middle East, portions of Central Asia). implementing IPv6 worldwide is going to take some time to solve running out of IPv4 space. 

non-routable address space consists of several different IP ranges that anyone can use. unlimited number of networks can use it internally because internet routers won't forward traffic to it. it means there's never any global collision of IP addresses. with NAT, we can have thousands of machines using non-routable address space. with just a single public IP, all those computers can send and receive traffic from the internet. one single IPv4 address and via NAT and a router with that IP can represent lots of computers behind it.

## VPN and proxy

### Virtual Private Networks

VPN: tunneling protocol that allows for the extension of a private or local network to host that might not work on that same local network. when establishing a VPN connection, you might also say that a VPN tunnel has been established.

- common example of VPN is for employees to access their business's network when they're not in the office. employee could use VPN client to establish a VPN tunnel to their company network. this would provision their computer with what's known as a virtual interface with an IP that matches the address space of the network they've established a VPN connection to. by sending data out of this virtual interface, the computer could access internal resources just like if it was physically connected to the private network.
- how it works: most VPNs work by using the payload section of the transport layer to carry an encrypted payload that actually contains an entire second set of packets. network / transport / application layers of a packet intended to traverse the remote network. this payload is carried to the VPNs end point where all the other layers are stripped away and discarded. then the payload is unencrypted, leaving the VPN server with the top three layers of a new packet. this gets encapsulated with the proper data link layer information and sent out across the network
- VPNs were one of the first techs where two-factor authentication became common. it's a technique where more than just a username and password are required to authenticate. usually a short lived numerical token is generated by the user.
- VPNs are a general technology concept, not a strictly defined protocol. there are lots of unique implementations of VPNs, and the details of how they all work can differ a lot.

### Proxy services

proxy service: server that acts on behalf of a client in order to access another service. it sits between clients and other servers, providing some additional benefit, anonymity, security, content filtering, increased performance. eg) gateway router. 

proxy: representing something. concept or abstraction. it exist at almost every layer of our networking model.

web proxy

- past: an organization would direct all web traffic through it, allowing the proxy server itself to actually retrieve the webpage data from the Internet. It would then cache this data. most organizations now have connections fast enough that caching individual webpages doesn't provide much benefit. also, the Web has become much more dynamic.
- now: to prevent someone from accessing sites. a company can direct all web traffic to it, allow the proxy to inspect what data is being requested, and then allow or deny this request, depending on what site is being accessed

reverse proxy: service that might appear to be a single server to external clients, but actually represents many servers living behind it. it could act as a single front-end from the clients' perspective

- implemented in order to use hardware built specifically for cryptography, to perform the encryption and decryption work so that the web servers are free to just serve content.

# Week 5 | Connecting to the Internet

## POTS and Dial-up

### Dial-up, Modem, Point-to-Point Protocol

for years before Ethernet, TCP or IP were ever invented, there were computer networks made up of technologies way more primitive than the discussed model. early networking techs mostly focused on connecting devices within close physical proximity to each other.

in the late 1970s two graduate students at Duke University were trying to come up with a better way to connect computers at further distances. they wanted to share what was essentially bulletin board material, then a light bulb moment went off. they realized the basic infrastructure for this already existed, the public telephone network. Public Switched Telephone Network or PSTN is also sometimes referred to as the Plain Old Telephone Service or POTS. it was already a pretty global and powerful system by the late 1970s. they were the first do it in a way that became permanent precursor to the dial up networks to follow. system they built is known as USENET.

dial-up connection: different locations used a very primitive form of this connection to exchange a series of messages with each other. dial-up connection uses POTS for data transfer, and gets its name because the connection is established by actually dialing a phone number. transferring data across this connection is done through devices called modems.

modem: modulator demodulator. they take data that computers can understand and turn them into audible wavelengths that can be transmitted over POTS. early modems had very low baud rates(a measurement of how many bits could be passed across a phone line in a second). by the time USENET was being developed, this rate had increased to around 300 bits per second.

## Broadband Connection

### What is broadband

in terms of internet connectivity: any connectivity technology that isn't dial-up Internet, connections that are always on. this means that they're long lasting connections that don't need to be established with each use.

T-carrier tech:  invented by AT&T in order to transmit multiple phone calls over a single link. without broadband internet connection, the Internet as we know it today wouldn't exist. we wouldn't be able to stream music, or movies, or easily share photos. T-carrier requires dedicated lines, which makes them more expensive. for this reason, we usually only see them in use by businesses.

### T-Carrier Technology

invented by AT&T in order to provision a system that allowed lots of phone calls to travel across a single cable. every individual phone call was made over individual pairs of copper wire before Transmission System 1, the first T-carrier specification, called T1.

data transfer with T1: with the T1 specification, AT&T invented a way to carry up to 24 simultaneous phone calls across a single piece of twisted pair copper. years later, this same tech was repurposed for data transfers. each of the 24 phone channels was capable of transmitting data at 64 kilobits per second, making a single T1 line capable of transmitting data at 1.544 megabits per sec. more improvements to the T1 line were made by developing a way of multiple T1s to act as a single link. so a T3 line is 28 T1s, all multiplexed, achieving a total throughput speed of 44.736 megabits per sec.

for small business offices, cable broadband or fiber connections are now way more common

### Digital Subscriber Line

there were certain limitations with trying to transmit data as what were essentially just audio waves. telephone companies began to wonder if they could use the same infrastructure but in a different way.

frequency difference is the solution - the research showed that twisted pair copper used by modern telephone lines was capable of transmitting way more data than what was needed for voice-to-voice calls. by operating at a frequency range that didn't interfere with normal phone calls, a tech known as digital subscriber line or DSL was able to send much more data across the wire than traditional dial-up technologies. to top it all off, this allowed for normal voice phone calls and data transfer to occur at the same time on the same line.

DSL: it has own modems known as DSLAMs or Digital Subscriber Line Access Multiplexers. just like dial-up modems, they establish data connections across phone lines, but unlike dial-up connections, they're usually long-running.

- ADSL(Asymmetric): different speeds for outbound and incoming data. faster download speeds and slower upload speeds. since home users are mostly just clients, they rarely need to upload as much data as they download. it often provide a similar user experience for a typical home user, but at a lower cost.
- SDSL(Symmetric): upload and download speeds are the same. it was mainly used by businesses that hosted servers that needed to send data to clients. as  general bandwidth available on the Internet has expanded and as the cost of operation have come down over the years, it's now more common for both businesses and home users.

### Cable Broadband

by using frequencies that don't interfere with television broadcast, cable-based Internet access technologies were able to deliver high speed Internet access across these same cables.

origin: television broadcasts were wireless transmissions sent out by giant television towers and received by smaller antennas in people's homes. by the early 1990s, cable television infrastructure in the US was about the size of the public telephone system. cable providers started trying to figure out if they could join in on the Internet growth. like DSL, cable companies realized that the coaxial cables  used by cable television delivery into a person's home were capable of transmitting much more data than what was required for TV. 

cable internet access vs. other broadband solutions: cable is generally what's known as a shared bandwidth technology

- broadband - with technologies like DSL or even dial up, connection from home or business goes directly to what's known as a Central Office or CO. long time ago, the COs were actually offices staffed with telephone operators who used switchboard to manually connect the caller with the callee. as tech improved, the COs became smaller pieces of automated hardware that handled these functions for the telephone companies, but the name stayed the same. techs that connect directly to a CO can guarantee a certain amount of bandwidth available over that connection since it's point to point.
- cable internet access - with this model in place, many users share a certain amount of bandwidth until the transmissions reach the ISP's core network. cable Internet connections are usually managed by what's known as a cable modem. it's device that sits at the edge of a consumer's network and connects it to the cable modem termination system, or CMTS(connecting lots of different cable connections to an ISP's core network).

### Fiber Connection

fiber connections use light for data transmission instead of electrical currents.

absolute maximum distance an electrical signal can travel across a copper cable before it degrades too much and requires a repeater is thousands of feet, but certain implementations of fiber connections can travel many, many miles before signal degrades.

in recent years it's become popular to use fiber to deliver data closer and closer to the end user. exactly how close to the end user can vary across implementations, which is why the phrase FTTX was developed. FTTX stands for fiber to the X, where the X can be one of many things.

- FTTN: means fiber to the neighborhood. This means that fiber technologies are used to deliver data to a single physical cabinet that serves a certain amount of the population. From this cabinet, twisted pair copper or coax might be used for the last length of distance.
- FTTB: stands for fiber to the building, fiber to the business, or even fiber to the basement, since this is generally where cables to buildings physically enter. it's a setup where fiber techs are used for data delivery to an individual building. after that, twisted pair copper is typically used to actually connect those inside of the building.
- FTTH: stands for fiber to the home. it's used in instances where fiber is actually run to each individual residents in a neighborhood or apartment building.
- FTTP: FTTH and FTTB both are referred to as  fiber to the premises. Instead of a modem, the demarcation point for Fiber techs is known as Optical Network Terminator or ONT. it converts data from protocols, the fiber network can understand to those that more traditional twisted pair copper networks can understand.

## WAN

### Wide Area Network Technology

wide area network acts like a single network, but spans across multiple physical locations. WAN usually require that you contract a link across the Internet with your ISP. this ISP handles sending your data from one site to the other. so it could be like all of your computers are in the same physical location.

local loop: typical WAN setup has a few sections. Imagine one network of computers on one side of the country and another network of computers on the other. each of those networks ends at a demarcation point, which is where the ISP's network takes over. area between each demarcation point and the ISP's actual core network is called a local loop. this local loop would be something like a T-carrier line or a high speed optical connection to the provider's local regional office.

WANs work by using a number of different protocols at the data link layer to transport your data from one site to another. in fact, these same protocols are what are sometimes at work at the core of the Internet itself, instead of are more familiar ethernet.

### Point-to-Point VPN

it establishes a VPN tunnel between two sites. this operates a lot like the way that a traditional VPN setup lets individual users act as if they are on the network they're connecting to. it's just that the VPN tunneling logic is handled by network devices at either side, so that users don't all have to establish their own connections.

popular alternative to WAN

- companies have been moving more and more of their internal services into the cloud which lets companies outsource all or part of their different pieces of infrastructure to other companies to manage. lots of businesses no longer require extreme high speed connections between their sites. companies can use point-to-point VPNs to make sure that there are different sites can still communicate with each other.

## Wireless Networking

### Introduction to Wireless Networking Technology

goals

- basics of how wireless communication works
- how wireless channels help wireless networks operate
- basics of wireless security protocols

802.11 standard: common specs for how wireless networking devices should communicate, are defined by the IEEE 802.11 standards. also called the 802.11 family, make up the set of technologies we call WiFi. wireless networking devices communicate with each other through radiowaves. different 802.11 standards generally use the same basic protocol, but might operate at different frequency bands which is certain section of the radio spectrum that's been agreed upon to be used. WiFi networks operate on the 2.4 gigahertz and 5 gigahertz bands. the most common specifications you might run into are 802.11b, 802.11a, 802.11g, 802.11n, and 802.11ac. you should think of 802.11 protocols as defining how we operate at both the physical and the data link layers.

802.11 frame

![netwhat%201ef30e3a9db54df6831922c1853c0104/98B8305A-08FA-46A4-9800-13DC065DD1BB.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/98B8305A-08FA-46A4-9800-13DC065DD1BB.jpeg)

- frame control field: a number of sub-fields that are used to describe how the frame itself should be processed. like what version of the 802.11 was used
- duration field: how long the total frame is the receiver knows how long it should expect to have to listen to the transmission
- 4 address fields: normal source address field, which would represent the MAC address of the sending device. the intended destination on the network, along with a receiving address and a transmitter address. the receiver address would be the MAC address of the access point that should receive the frame, and the transmitter address would be the MAC address of whatever has just transmitted the frame.
    - why 4? - the most common wireless network architectures setup includes devices called access points. wireless access point is a device that bridges the wireless and wired portions of a network. single wireless network might have lots of different access points to cover a large area. devices on a wireless network will associate with a certain access point. this is usually the one they're physically closest to. but, it can also be determined by all sorts of other things like general signal strength, and wireless interference. associations isn't just important for the wireless device to talk to a specific access point, it also allows for incoming transmissions to the wireless device to be sent by the right access point. there are four address fields, because there needs to be room to indicate which wireless access point should be processing the frame.
    - special case - in lots of situations, the destination and receiver address might be the same. usually, the source and transmitter addresses are also the same. but, depending on exactly how a specific wireless network has been architected, this won't always be the case. Sometimes, wireless access points will relay these frames from one another.
- sequence control field: keep track of ordering the frames
- data payload section: all of the data of the protocols further up the stack
- frame check sequence field: checksum used for a cyclical redundancy check

### Wireless Network Configuration

main ways

- ad-hoc networks: where nodes all speak directly to each other
    - there isn't really any supporting network infrastructure.
    - every device involved with the network communicates with every other device within range and all nodes help pass along messages.
    - smartphones can establish ad-hoc networks with other smartphones in the area so that people can exchange photos, video or contact information. in industrial or warehouse settings, where individual pieces of equipment might need to communicate with each other, but not with anything else.
    - powerful tools during disaster situations. if a natural disaster like an earthquake or hurricane knocks out all of the existing infrastructure in an area, disaster relief professionals can use an ad-hoc network to communicate with each other while they perform search and rescue efforts.

![netwhat%201ef30e3a9db54df6831922c1853c0104/4A2CBBC7-D6AD-41DC-A6B5-40F43D924FE1.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/4A2CBBC7-D6AD-41DC-A6B5-40F43D924FE1.jpeg)

- WLANS: where one or more access points act as a bridge between a wireless and a wired network
    - most common type of wireless network in the business world.
    - it consists of one or more access points, which act as bridges between the wireless and wired networks.
    - wired network operates as a normal LAN, like the types we've already discussed, the wired LAN contains the outbound internet link. in order to access resources outside of the WLAN, wireless devices would communicate with access points. they then forward traffic along to the gateway router, where everything proceeds like normal.

![netwhat%201ef30e3a9db54df6831922c1853c0104/6E85D34E-3176-4FE6-B76C-0D4583688930.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/6E85D34E-3176-4FE6-B76C-0D4583688930.jpeg)

- mesh network: hybrid of the two.
    - it's kind of like ad-hoc networks, since lots of the devices communicate with each other wirelessly, forming a mesh. if we were to draw lines for all the links between all the nodes, most mesh networks are made up of only wireless access points and will still be connected to a wired network. this kind of network let's us deploy more access points to the mesh without having to run a cable to each of them. with this kind of setup, we can really increase the performance and range of a wireless network.

### Wireless Channel

Channel: individual, smaller sections of the overall frequency band used by a wireless network

- collision domain problem: they help address a very old networking concern, collision domains. collision domain is any one network segment where one computer can interrupt another. communications that overlap each other can't be properly understood by the receiving end. so when two or more transmissions occur at the same time, also called a collision, all devices in question have to stop their transmissions. they wait a random amount of time and try again when things quiet down. this really slows things down. the problem caused by collision domains has been mostly reduced on wired networks through devices called switches. switches remember which computers live on which physical interfaces. so traffic is only sent to the node It's intended for. Wireless networking doesn't have cables, so there aren't physical interfaces for a wireless device to connect to. that means, we can have something that works like a wireless switch. wireless devices are doomed to talk over each other.
- channel as a solution: channels help fix this problem to a certain extent. we discuss the frequency bands we use by Wi-Fi, we just mentioned 2.4 GHz and 5 GHz. this is because that's really just shorthand for where these frequency bands actually begin. for wireless networks that operate on a 2.4 GHz band, what we really mean is that they operate on roughly the band from 2.4 GHz to 2.5 GHz. between these two frequencies are a number of channels, each with a width of a certain MHz. exactly how many channels are available for use depends on where in the world you are. for example, dealing with an 802.11b network, channel one operates at 2412 MHz, but since the channel width is 22 MHz, the signal really lives on the frequencies between 2401 MHz and 2423 MHz. this is because radio waves are imprecise things. so, you need some buffer around what exact frequencies a transmission might actually arrive on. some channels overlap but some are far enough apart so they won't interfere with each other at all. let's look again at 802.11b network running on a 2.4 GHz band, because it's really the simplest and the concepts translate to all other 802.11 specifications. with a channel width of 22 MHtz, channel one with its midpoint at 2412 MHz, is always completely isolated from channel six with its midpoint at 2437 MHz. for an 802.11b network, this means that channels 1 and 6 and 11 are the only ones that never overlap at all. that's not all that matters, though.

![netwhat%201ef30e3a9db54df6831922c1853c0104/9186C71E-8CA2-4A15-97D0-1422706F014A.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/9186C71E-8CA2-4A15-97D0-1422706F014A.jpeg)

- example: today, most wireless networking equipment is built to auto sense what channels are most congested. some access points will only perform this analysis when they start up, others will dynamically change their channel as needed. between those two scenarios and manually specified channels, you can still run into situations where you experience heavy channel congestion. this is especially true in dense urban areas with lots of wireless networks in close proximity.

### Wireless Security

with wireless networking, since there aren't cables, just radio transmissions being broadcast through the air, anyone within range could hypothetically intercept any transmissions, whether they were intended for them or not.

WEP as a solution: Wired Equivalent Privacy. encryption tech that provides a very low level of privacy. it doesn't take very long for a bad actor to be able to break through this encryption and read your data.

WPA: Wi-Fi Protected Access. it uses a 128-bit key, making it a whole lot more difficult to crack than WEP. WPA2 uses a 256-bit key

MAC filtering: with MAC filtering, we configure our access points to only allow for connections from a specific set of MAC addresses belonging to devices you trust

### Cellular Networking

another super popular form of wireless networking

cellular networks have a lot in common with the 802.11 networks. there are lots of different cellular specifications. it operates over radio waves, and there are specific frequency bands specifically reserved for cellular transmissions. these frequencies can travel over longer distances more easily, usually over many kilometers or miles.

configuration: they are built around the concept of cells. Each cell is assigned a specific frequency band for use. neighboring cells are set up to use bands that don't overlap. the cell towers that broadcast and receive cellular transmissions can be thought of like access points, just with a much larger range.

# Week 6

## Verifying Connectivity

### Ping: Internet Control Message Protocol

the most common issue of network problems is the inability to establish a connection with something(server, website) 

when a network error occurs the device that detects it needs some way to communicate this to the source of the problematic traffic. 

- a router doesn't know how to route to a destination
- a certain port isn't reachable
- the TTL of an IP datagram expired

for all of these situations an more ICMP is used to communicate these issues. it's mainly used by a router or remote host to communicate why a transmission has failed back to the origin of the transmission. 

makeup of an ICMP packet

- header with a few fields,
    - type field 8 bits along which specifies what type of message is being delivered. some examples are destination unreachable, or time exceeded.
    - code field which indicates a more specific reason for the message than just the type, for example of the destination unreachable type there are individual codes for things like destination network unreachable, and destination port unreachable.
    - 16 bit checksum
    - 32 bit field with an uninspired name is optionally used by some of the specific types and codes to send more data
- data section that's used by host to figure out which of their transmissions generated the error.
    - the entire IP header, and the first 8 bytes of the data payload section of the offending packet

ICMP wasn't really developed for humans to interact with. these sorts of error messages can be delivered between networked computers automatically. but there's also a specific tool and two message types that are very useful to human operators. this tool is called ping. 

 

- ping is a super simple program and the basics are the same for any os. it let's you send a special type of ICMP message called an echo request. ICMP echo requests essentially just acid destination. "Hey are you there?" if the destination is up and running and able to communicate on the network, it will send back an ICMP echo reply message type.
- every line of output will generally display the adverse sending the ICMP Echo reply, and how long it took for the round trip communications. it also have the TTL remaining and how large the ICMP message is in bytes. there are also some statistics displayed, like percentage of packets transmitted and received, the average round trip time, and a couple other things like that. on Linux and Mac OS, the Ping Command will run until it's interrupted by an end user sending an interrupt event. they do this by pressing the ctrl+C. on Windows, Ping defaults to only sending 4Echo requests.

### Traceroute

traceroute is an utility that lets you discover the paths between two nodes, and gives you information about each hop along the way. 

- the way it works: through a clever manipulation technique of the TTL field at the IP level. when the TTL field reaches zero, the packet is discarded and an ICMP Time Exceeded message is sent back to the originating host. it uses the TTL field by first setting it to one for the first packet, then two for the second and so on. by doing this clever little action, it makes sure that the very first packet sent will be discarded by the first router hop. this results in an ICMP Time Exceeded message, the second packet will make it to the second router, the third will make it to the third, and so on. this continues until the packet finally makes it all the way to its destination. for each hop, it will send 3 identical packets.
- output: on each line, you'll see the number of the hop and the round trip time for all 3 packets. you will also see the IP of the device at each hop, and a host name if traceroute can resolve one. on Linux and MacOS, traceroute sends UDP packets to very high port numbers. on Windows, the command has a shortened name tracert, and defaults to using ICMP echo request. on all platforms, traceroute has more options than can be specified using command line flags.

two more tools that are similar to traceroute are mtr on Linux and MacOS and pathping on Windows. they act as long running traceroutes. so you can better see how things change over a period of time. mtr works in real time and will continually update its output with all the current aggregate data about the traceroute. you can compare this with pathping, which runs for 50 seconds and then displays the final aggregate data all at once.

## Digging into DNS

## The Cloud

### What is Cloud

cloud computing: a technological approach where computing resources are provisioned in a shareable way so that users get what they need when they need it. it leans heavily on the idea that companies provide services for each other using these shared resources. 

- hardware virtualization: core concept of how cloud computing works. it allows the concept of a physical machine and a logical machine to be abstracted away from each other. With virtualization, a single physical machine called a host could run many individual virtual instances called guests. An os expects to be able to communicate with the underlying hardware in certain ways. Hardware virtualization platforms employ what's called a hypervisor. A hypervisor is a piece of software that runs and manages virtual machines while also offering these guests a virtual operating platform that's indistinguishable from actual hardware. With virtualization, a single physical computer can act as the host for many independent virtual instances. They each run their own independent os and, in many ways, are indistinguishable from the same os running on physical hardware.

the cloud takes this concept one step further. If you build a huge cluster of interconnected machines that can all function as hosts for lots of virtual guests, you've got a system that lets you share resources among all of those instances.

- practical example

![netwhat%201ef30e3a9db54df6831922c1853c0104/888E6B87-EABD-467F-BCBD-EEBE1BC53D77.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/888E6B87-EABD-467F-BCBD-EEBE1BC53D77.jpeg)

- let's say you have the need for four servers.

    1. email server - you've carefully analyzed things and expect this machine will need 8gb RAM

    2. name server - it barely needs any resources since it doesn't have to perform anything really computational. but, you can't run it on the same physical machine as email server since it needs to run on Windows, and name server needs to run on Linux. now, the smallest server configuration your hardware vendor sells is a machine with 8gb of RAM. so you have to buy another one with those specifications. 

    3. financial database - it's normally pretty quiet and doesn't need too many resources during normal operations. but for your end of month billing processes to complete in a timely manner, you determine the machine would need 32gb RAM. it has to run on a special version of Linux designed just for the database so the name server can also run on this machine. so you order a server with that much RAM and then a second with the same specifications to act as a backup. in order to run your business this way, you have to purchase four machines with a grand total of 80 gigabytes of RAM.

![netwhat%201ef30e3a9db54df6831922c1853c0104/78BA1AAF-02A5-4759-849D-4E4E90C6A235.jpeg](netwhat%201ef30e3a9db54df6831922c1853c0104/78BA1AAF-02A5-4759-849D-4E4E90C6A235.jpeg)

- let's imagine a huge collection of interconnected servers that can host virtualized servers. these virtual instances running on this collection of servers can be given access to the underlying RAM as they need it. under this model, the company that runs the collection of servers can charge you to host virtual instances of your servers instead of you buying the four physical machines. and it could cost much less than what you'd spend on the four physical servers. the benefits of the cloud are obvious.
- cloud computing company that can host your virtualized instances also offer dozens of other services. so instead of worrying about setting up your own backup solution, you can just employ theirs. It's easy. and if you need a load balancer, you can just use their solution. plus, if any underlying hardware breaks, they just move your virtual instance to another machine without you even noticing. to top it all off, since these are all virtual servers and services, you don't have to wait for the physical hardware you ordered to show up.
- private cloud takes the same concepts, but instead, it's entirely used by a single large corporation and generally physically hosted on its own premises.

### Everything as a Service

cloud computing comes to mean so much more than just hosting virtual machines. another term that's been used more and more with the rise of cloud computing is X as a service. so far cloud would probably best be defined as infrastructure as a service or IaaS. cloud expands beyond IaaS.

- PaaS: Platform as a service is a subset of cloud computing where a platform is provided for customers to run their services. this basically means that an execution engine is provided for whatever software someone wants to run. a web developer writing a new application doesn't really need an entire server complete with a complex file system, dedicated resources, and all these other things. it doesn't matter if this server is virtual or not. they really just need an environment that their web app can run in.
- SaaS: Infrastructure as a service abstracts away the physical infrastructure you need and platform as a service abstracts away the server instances you need. Software as a service is essentially a way of licensing the use of software to others while keeping that software centrally hosted and managed.
    - offerings like Gmail for Business from Google or Office 365 Outlook from Microsoft are really good examples of software as a service. using one of those services means you're trusting Google or Microsoft to handle just about everything about your email service.
    - web browsers have become so feature packed that lots of things that required standalone software in the past can now run well inside of a browser. and if you can run something in a browser, it's a prime candidate for SaaS. today, you can find everything from word processors to graphic design programs to human resource management solutions offered under a subscription based SaaS model. more and more, the point of a business' network is just to provide an internet connection to access different software or data in the cloud.

### Cloud Storage

customer contracts a cloud storage provider to keep their data secure, accessible, and available.

benefits of cloud storage over a traditional storage mechanism

- without cloud storage, there's the general headache of managing a storage array. it's up to the provider to keep the underlying physical hardware running.
- cloud storage providers usually operate in lots of different geographic regions. this let's you easily duplicate your data across multiple sites.
- it's also a good solution for backing up smaller bits of data. If your phone dies, you lose it, or accidentally delete pictures, they're still there waiting for you in the cloud.

.

.
# 마지막줄 출력 안됨

Status: Completed
구현버전: 3
문제유형: semantic error
발견법: replit

```c
testfile
//
aaaaaaaaaa
12345
//
BUFFER_SIZE = 11

// 마지막 줄이 출력되지 않는다.
// 마지막 줄에 \n을 넣으면 제대로 동작한다.

// 1. 마지막줄을 line에 저장하고 0을 리턴해야 되는지
// 2. 마지막줄을 line에 저장하고 1을 리턴한 후 다음 gnl 호출에서 바로 0을 리턴하고 빈 line을 보내야 하는지 알아야 한다.

// 1. line 저장 후 read_result < BUFFER_SIZE 이면 0을 리턴한다.
// 그런데 모든 줄(\n포함)이 정확하게 BUFFERSIZE인 경우를 고려하지 못한다.

// 2. 현재 구현방식인데 문제점은 마지막줄에 \n이 없어서 while 문을 빠져나오지 않는다는 것이다.
// -> 현재 구현방식은 마지막줄을 복사한 후 다시 read를 호출해서 0을 리턴한다.

// 원인: 마지막줄에서 line 에 복사한 내용이 다음 while 문에서 read_result == 0 이 되면서 빈 문자열로 업데이트 된 후 0을 리턴한다.
// 마지막줄을 읽고 다음 read 전에 0 을 리턴해야 한다.

// 해결책: read_result 가 0이거나 -1 인 경우 line 이 비어있는 경우에만 빈 라인을 다시 만들었다.
// line이 비어있는 경우는 (**line == 1) 이다. -> 1은 의미없는 값이다.

```